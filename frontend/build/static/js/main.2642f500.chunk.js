(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{57:function(e,t,n){e.exports=n(96)},92:function(e,t){},96:function(e,t,n){"use strict";n.r(t);var s=n(0),a=n.n(s),r=n(23),c=n(13),o=n(15),i=n(52),u=n(53),m=n(56),l=n(36),d="SEND_MESSAGE_RESPONSE",g="SEND_MESSAGE_REQUEST",h={username:"Guest".concat(Math.floor(1001*Math.random())),messages:[]};var p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g:return Object(l.a)({},e,{messages:e.messages.concat(t.message)});case d:return Object(l.a)({},e,{messages:[].concat(Object(m.a)(e.messages),[t.message])});default:return e}},f="CONNECTION_CHANGED",E={connected:!1};var v=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case f:e=Object.assign({},t,{connected:n.connected,isError:!1});break;default:e=t}return e},b="USER_JOINED",O="USER_LEFT",k="CHANGE_USERNAME",y={usernames:[]};var j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b:return{usernames:e.usernames.concat(t.username)};case O:return{usernames:e.usernames.filter(function(e){return e!==t.username})};case k:return{usernames:e.usernames.map(function(e){return e===t.username?t.username:e})};default:return e}},C=n(5),T=n(25),M=n.n(T),N="connect",S="disconnect",w="message",R="chatbot",U="update_user_list",_=function e(t,n){var s=this;Object(C.a)(this,e),this.username=void 0,this.port=void 0,this.onChange=void 0,this.onMessage=void 0,this.socket=void 0,this.connect=function(e,t){s.username=e,s.port=t;var n="localhost:".concat(t);s.socket=T.connect(n),s.socket.on(N,s.onConnected)},this.onConnected=function(){s.socket.on(w,s.onMessage),s.onChange(!0);var e={username:"Chat Bot",message:"Hello "+s.username+"! Change the nickname and start chatting.",timestamp:(new Date).getTime()},t={username:"",message:"".concat(s.username," joined the chat!"),timestamp:(new Date).getTime()};s.sendMessageToMe(e),s.sendMessageToOthers(t),s.updateUserList(t.username),s.socket.on(S,s.disconnect)},this.sendMessageToOthers=function(e){"function"===typeof s.socket.emit?s.socket.emit(w,e):console.error("Cannot emit socket messages. Socket.io not connected.")},this.sendMessageToMe=function(e){"function"===typeof s.socket.emit?s.socket.emit(R,e):console.error("Cannot emit socket messages. Socket.io not connected.")},this.updateUserList=function(e){"function"===typeof s.socket.emit?s.socket.emit(U,e):console.error("Cannot emit socket messages. Socket.io not connected.")},this.disconnect=function(){console.log("DISCONNECT");var e={username:"",message:"".concat(s.username," left the chat!"),timestamp:(new Date).getTime()};s.sendMessageToOthers(e),s.socket.close()},this.onChange=t,this.onMessage=n,this.socket="",this.username="",this.port=""},D=function(e){var t=new _(function(t){e.dispatch(function(e){return{type:f,connected:e,isError:!1}}(t))},function(t){console.log("TULEEX"),e.dispatch(function(e){return{type:d,message:e}}(t))});return function(n){return function(s){var a=e.getState().socketReducer;switch(s.type){case"CONNECT_SOCKET":t.connect(s.username,Object({NODE_ENV:"production",PUBLIC_URL:""}).PORT||a.port);break;case g:t.sendMessageToOthers(s.message)}return n(s)}}},L=Object(o.combineReducers)({messageReducer:p,socketReducer:v,userReducer:j});var P=n(8),x=n(10),A=n(9),G=n(11),H=function(e){function t(){return Object(C.a)(this,t),Object(x.a)(this,Object(A.a)(t).apply(this,arguments))}return Object(G.a)(t,e),Object(P.a)(t,[{key:"render",value:function(){var e=this.props.usernames;return a.a.createElement("div",null,a.a.createElement("p",{style:{fontWeight:"bold"}},"Users online:"),a.a.createElement("ul",{className:"user-list",id:"user-list"},e.map(function(e){return a.a.createElement("li",{key:e},e)})))}}]),t}(a.a.Component),B=Object(c.b)(function(e){return{usernames:e.userReducer.usernames}})(H),I=function(e){function t(e){var n;return Object(C.a)(this,t),(n=Object(x.a)(this,Object(A.a)(t).call(this,e))).messageListRef=a.a.createRef(),n.scrollToBottom=function(e){e.scrollTop=e.scrollHeight},n.state={apiCall:""},n}return Object(G.a)(t,e),Object(P.a)(t,[{key:"componentDidUpdate",value:function(){var e=this.messageListRef.current;e.scrollTop,e.clientHeight,e.scrollHeight,M()("/")}},{key:"render",value:function(){var e=this.props.messages;return a.a.createElement("div",null,a.a.createElement("div",{className:"message-list",id:"message-list",ref:this.messageListRef,style:{display:"inline-block",height:"calc(100vh - 200px)",overflowY:"scroll",padding:"0 10px 0 10px",width:"50%"}},e.map(function(e){return e.message?a.a.createElement("div",{className:"message-item",key:e.timestamp},e.username.length>0?a.a.createElement("div",null,a.a.createElement("p",{className:"message-from",style:{fontWeight:"bold",marginBottom:0}},e.username),a.a.createElement("p",{style:{marginTop:0}},e.message)):e.message.includes("joined")?a.a.createElement("p",{className:"message-from joined-message",style:{marginTop:0,color:"green"}},e.message):e.message.includes("left")?a.a.createElement("p",{className:"message-from left-message",style:{marginTop:0,color:"red"}},e.message):null):null})),a.a.createElement("div",{style:{display:"inline-block",paddingLeft:"20px"}},a.a.createElement(B,null)))}}]),t}(a.a.Component),J=Object(c.b)(function(e){return{messages:e.messageReducer.messages}})(I),W=function(e){function t(){var e,n;Object(C.a)(this,t);for(var s=arguments.length,a=new Array(s),r=0;r<s;r++)a[r]=arguments[r];return(n=Object(x.a)(this,(e=Object(A.a)(t)).call.apply(e,[this].concat(a)))).state={username:"",message:""},n.keyPress=function(e){"Enter"===e.key&&n.sendChatMessage()},n.sendChatMessage=function(){""!==n.state.message&&(n.props.sendMessage({username:n.state.username,message:n.state.message,timestamp:(new Date).getTime()}),n.setState({message:""}))},n.sendChatMessageWithParams=function(e){n.props.sendMessage(e)},n.updateUsername=function(e){n.setState({username:e.currentTarget.value}),n.props.changeUsername(e.currentTarget.value)},n.updateMessage=function(e){n.setState({message:e.currentTarget.value})},n}return Object(G.a)(t,e),Object(P.a)(t,[{key:"componentDidMount",value:function(){var e="Guest"+Math.floor(1001*Math.random());this.setState({username:e}),this.props.connectSocket(e),this.props.userJoined(e)}},{key:"render",value:function(){var e=this.state,t=e.username,n=e.message;return a.a.createElement("div",null,a.a.createElement("div",{className:"chat-form"},a.a.createElement("input",{id:"nickname-input",value:t,onChange:this.updateUsername}),a.a.createElement("br",null),a.a.createElement("input",{id:"chat-input",value:n,onChange:this.updateMessage,onKeyPress:this.keyPress,className:"chat-input",placeholder:"Type a message...",autoFocus:!0}),a.a.createElement("button",{onClick:this.sendChatMessage,id:"send-message-btn"},"Send")))}}]),t}(a.a.Component),K=Object(c.b)(null,function(e){return{sendMessage:function(t){return e(function(e){return{type:g,message:e}}(t))},changeUsername:function(t){return e(function(e){return{type:k,username:e}}(t))},connectSocket:function(t){return e(function(e){return{type:"CONNECT_SOCKET",username:e}}(t))},userJoined:function(t){return e(function(e){return{type:b,username:e}}(t))}}})(W),F=function(){return a.a.createElement("div",{className:"chat-page"},a.a.createElement(J,null),a.a.createElement(K,null))},Q=function(){return a.a.createElement("h1",null,"Not found")},V=n(54),X=n(14),Y=function(e){function t(){return Object(C.a)(this,t),Object(x.a)(this,Object(A.a)(t).apply(this,arguments))}return Object(G.a)(t,e),Object(P.a)(t,[{key:"render",value:function(){return a.a.createElement(V.a,null,a.a.createElement("div",null,a.a.createElement(X.c,null,a.a.createElement(X.a,{exact:!0,path:"/",component:F}),a.a.createElement(X.a,{component:Q}))))}}]),t}(a.a.Component),q=function(e){function t(){return Object(C.a)(this,t),Object(x.a)(this,Object(A.a)(t).apply(this,arguments))}return Object(G.a)(t,e),Object(P.a)(t,[{key:"render",value:function(){return a.a.createElement(Y,null)}}]),t}(a.a.Component),z=function(){var e=[i.a],t=o.applyMiddleware.apply(void 0,e.concat([D]));return Object(o.createStore)(L,Object(u.composeWithDevTools)(t))}();Object(r.render)(a.a.createElement(c.a,{store:z},a.a.createElement(q,null)),document.getElementById("root"))}},[[57,1,2]]]);
//# sourceMappingURL=main.2642f500.chunk.js.map